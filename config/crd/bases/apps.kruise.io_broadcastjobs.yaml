---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.3
  name: broadcastjobs.apps.kruise.io
spec:
  group: apps.kruise.io
  names:
    kind: BroadcastJob
    listKind: BroadcastJobList
    plural: broadcastjobs
    shortNames:
    - bcj
    singular: broadcastjob
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: The desired number of pods. This is typically equal to the number
        of nodes satisfied to run pods.
      jsonPath: .status.desired
      name: Desired
      type: integer
    - description: The number of actively running pods.
      jsonPath: .status.active
      name: Active
      type: integer
    - description: The number of pods which reached phase Succeeded.
      jsonPath: .status.succeeded
      name: Succeeded
      type: integer
    - description: The number of pods which reached phase Failed.
      jsonPath: .status.failed
      name: Failed
      type: integer
    - description: CreationTimestamp is a timestamp representing the server time when
        this object was created. It is not guaranteed to be set in happens-before
        order across separate operations. Clients may not set this value. It is represented
        in RFC3339 form and is in UTC.
      jsonPath: .metadata.creationTimestamp
      name: AGE
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: BroadcastJob is the Schema for the broadcastjobs API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: BroadcastJobSpec defines the desired state of BroadcastJob
            properties:
              completionPolicy:
                description: |-
                  CompletionPolicy indicates the completion policy of the job.
                  Default is Always CompletionPolicyType.
                properties:
                  activeDeadlineSeconds:
                    description: |-
                      ActiveDeadlineSeconds specifies the duration in seconds relative to the startTime that the job may be active
                      before the system tries to terminate it; value must be positive integer.
                      Only works for Always type.
                    format: int64
                    type: integer
                  ttlSecondsAfterFinished:
                    description: |-
                      ttlSecondsAfterFinished limits the lifetime of a Job that has finished
                      execution (either Complete or Failed). If this field is set,
                      ttlSecondsAfterFinished after the Job finishes, it is eligible to be
                      automatically deleted. When the Job is being deleted, its lifecycle
                      guarantees (e.g. finalizers) will be honored. If this field is unset,
                      the Job won't be automatically deleted. If this field is set to zero,
                      the Job becomes eligible to be deleted immediately after it finishes.
                      This field is alpha-level and is only honored by servers that enable the
                      TTLAfterFinished feature.
                      Only works for Always type
                    format: int32
                    type: integer
                  type:
                    description: |-
                      Type indicates the type of the CompletionPolicy.
                      Default is Always.
                    type: string
                type: object
              failurePolicy:
                description: FailurePolicy indicates the behavior of the job, when
                  failed pod is found.
                properties:
                  restartLimit:
                    description: RestartLimit specifies the number of retries before
                      marking the pod failed.
                    format: int32
                    type: integer
                  type:
                    description: |-
                      Type indicates the type of FailurePolicyType.
                      Default is FailurePolicyTypeFailFast.
                    type: string
                type: object
              parallelism:
                anyOf:
                - type: integer
                - type: string
                description: |-
                  Parallelism specifies the maximum desired number of pods the job should
                  run at any given time. The actual number of pods running in steady state will
                  be less than this number when the work left to do is less than max parallelism.
                  Not setting this value means no limit.
                x-kubernetes-int-or-string: true
              paused:
                description: Paused will pause the job.
                type: boolean
              podFailurePolicy:
                description: |-
                  PodFailurePolicy specifies how failed pods influence the backoffLimit.
                  Rules are evaluated in order, and once a rule matches a Pod failure,
                  the remaining rules are ignored. When no rule matches, the default
                  handling applies based on FailurePolicy.
                  This is similar to upstream Kubernetes Job's PodFailurePolicy (GA in k8s 1.31).
                properties:
                  rules:
                    description: |-
                      A list of pod failure policy rules. The rules are evaluated in order.
                      Once a rule matches a Pod failure, the remaining of the rules are ignored.
                      When no rule matches the Pod failure, the default handling applies - the
                      counter of pod failures is incremented and it is checked against
                      the backoffLimit. At most 20 elements are allowed.
                    items:
                      description: PodFailurePolicyRule describes how a pod failure
                        is handled when the requirements are met.
                      properties:
                        action:
                          allOf:
                          - enum:
                            - FailJob
                            - Ignore
                            - Count
                          - enum:
                            - FailJob
                            - Ignore
                            - Count
                          description: |-
                            Specifies the action taken on a pod failure when the requirements are satisfied.
                            Possible values are:

                            - FailJob: indicates that the pod's job is marked as Failed and all
                              running pods are terminated.
                            - Ignore: indicates that the counter towards the .backoffLimit is not
                              incremented and a replacement pod is created.
                            - Count: indicates that the pod is handled in the default way - the
                              counter towards the .backoffLimit is incremented.
                          type: string
                        onExitCodes:
                          description: Represents the requirement on the container
                            exit codes.
                          properties:
                            containerName:
                              description: |-
                                Restricts the check for exit codes to the container with the
                                specified name. When null, the rule applies to all containers.
                                When specified, it should match one the container or initContainer
                                names in the pod template.
                              type: string
                            operator:
                              allOf:
                              - enum:
                                - In
                                - NotIn
                              - enum:
                                - In
                                - NotIn
                              description: |-
                                Represents the relationship between the container exit code(s) and the
                                specified values. Containers completed with success (exit code 0) are
                                excluded from the requirement check.
                              type: string
                            values:
                              description: |-
                                Specifies the set of values. Each returned container exit code (might be
                                multiple in case of multiple containers) is checked against this set of
                                values with respect to the operator. The list of values must be ordered
                                and must not contain duplicates. Value '0' cannot be used for the In operator.
                                At least one element is required. At most 255 elements are allowed.
                              items:
                                format: int32
                                type: integer
                              type: array
                              x-kubernetes-list-type: set
                          required:
                          - operator
                          - values
                          type: object
                        onPodConditions:
                          description: |-
                            Represents the requirement on the pod conditions. The requirement is represented
                            as a list of pod condition patterns. The requirement is satisfied if at
                            least one pattern matches an actual pod condition. At most 20 elements are allowed.
                          items:
                            description: |-
                              PodFailurePolicyOnPodConditionsPattern describes a pattern for matching
                              an actual pod condition type.
                            properties:
                              status:
                                default: "True"
                                description: |-
                                  Specifies the required Pod condition status. To match a pod condition
                                  it is required that the specified status equals the pod condition status.
                                  Defaults to True.
                                type: string
                              type:
                                description: |-
                                  Specifies the required Pod condition type. To match a pod condition
                                  it is required that specified type equals the pod condition type.
                                type: string
                            required:
                            - status
                            - type
                            type: object
                          type: array
                          x-kubernetes-list-type: atomic
                      required:
                      - action
                      type: object
                    type: array
                    x-kubernetes-list-type: atomic
                required:
                - rules
                type: object
              podReplacementPolicy:
                description: |-
                  PodReplacementPolicy specifies when to create replacement Pods.
                  Possible values are:
                  - TerminatingOrFailed means that we recreate pods
                    when they are terminating (has a metadata.deletionTimestamp) or failed.
                  - Failed means to wait until a previously created Pod is fully terminated (has phase
                    Failed or Succeeded) before creating a replacement Pod.

                  When using podFailurePolicy, Failed is the the default.
                  When not using podFailurePolicy, TerminatingOrFailed is the default.
                  This is similar to upstream Kubernetes Job's PodReplacementPolicy (GA in k8s 1.34).
                enum:
                - TerminatingOrFailed
                - Failed
                type: string
              template:
                description: Template describes the pod that will be created when
                  executing a job.
                x-kubernetes-preserve-unknown-fields: true
            required:
            - template
            type: object
          status:
            description: BroadcastJobStatus defines the observed state of BroadcastJob
            properties:
              active:
                description: The number of actively running pods.
                format: int32
                type: integer
              completionTime:
                description: |-
                  Represents time when the job was completed. It is not guaranteed to
                  be set in happens-before order across separate operations.
                  It is represented in RFC3339 form and is in UTC.
                format: date-time
                type: string
              conditions:
                description: The latest available observations of an object's current
                  state.
                items:
                  description: JobCondition describes current state of a job.
                  properties:
                    lastProbeTime:
                      description: Last time the condition was checked.
                      format: date-time
                      type: string
                    lastTransitionTime:
                      description: Last time the condition transit from one status
                        to another.
                      format: date-time
                      type: string
                    message:
                      description: Human readable message indicating details about
                        last transition.
                      type: string
                    reason:
                      description: (brief) reason for the condition's last transition.
                      type: string
                    status:
                      description: Status of the condition, one of True, False, Unknown.
                      type: string
                    type:
                      description: Type of job condition, Complete or Failed.
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              desired:
                description: The desired number of pods, this is typically equal to
                  the number of nodes satisfied to run pods.
                format: int32
                type: integer
              failed:
                description: The number of pods which reached phase Failed.
                format: int32
                type: integer
              phase:
                description: The phase of the job.
                type: string
              startTime:
                description: |-
                  Represents time when the job was acknowledged by the job controller.
                  It is not guaranteed to be set in happens-before order across separate operations.
                  It is represented in RFC3339 form and is in UTC.
                format: date-time
                type: string
              succeeded:
                description: The number of pods which reached phase Succeeded.
                format: int32
                type: integer
            type: object
        type: object
    served: true
    storage: false
    subresources:
      status: {}
  - additionalPrinterColumns:
    - description: The desired number of pods. This is typically equal to the number
        of nodes satisfied to run pods.
      jsonPath: .status.desired
      name: Desired
      type: integer
    - description: The number of actively running pods.
      jsonPath: .status.active
      name: Active
      type: integer
    - description: The number of pods which reached phase Succeeded.
      jsonPath: .status.succeeded
      name: Succeeded
      type: integer
    - description: The number of pods which reached phase Failed.
      jsonPath: .status.failed
      name: Failed
      type: integer
    - description: CreationTimestamp is a timestamp representing the server time when
        this object was created. It is not guaranteed to be set in happens-before
        order across separate operations. Clients may not set this value. It is represented
        in RFC3339 form and is in UTC.
      jsonPath: .metadata.creationTimestamp
      name: AGE
      type: date
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: BroadcastJob is the Schema for the broadcastjobs API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: BroadcastJobSpec defines the desired state of BroadcastJob
            properties:
              completionPolicy:
                description: |-
                  CompletionPolicy indicates the completion policy of the job.
                  Default is Always CompletionPolicyType.
                properties:
                  activeDeadlineSeconds:
                    description: |-
                      ActiveDeadlineSeconds specifies the duration in seconds relative to the startTime that the job may be active
                      before the system tries to terminate it; value must be positive integer.
                      Only works for Always type.
                    format: int64
                    type: integer
                  ttlSecondsAfterFinished:
                    description: |-
                      ttlSecondsAfterFinished limits the lifetime of a Job that has finished
                      execution (either Complete or Failed). If this field is set,
                      ttlSecondsAfterFinished after the Job finishes, it is eligible to be
                      automatically deleted. When the Job is being deleted, its lifecycle
                      guarantees (e.g. finalizers) will be honored. If this field is unset,
                      the Job won't be automatically deleted. If this field is set to zero,
                      the Job becomes eligible to be deleted immediately after it finishes.
                      This field is alpha-level and is only honored by servers that enable the
                      TTLAfterFinished feature.
                      Only works for Always type
                    format: int32
                    type: integer
                  type:
                    description: |-
                      Type indicates the type of the CompletionPolicy.
                      Default is Always.
                    type: string
                type: object
              failurePolicy:
                description: FailurePolicy indicates the behavior of the job, when
                  failed pod is found.
                properties:
                  restartLimit:
                    description: RestartLimit specifies the number of retries before
                      marking the pod failed.
                    format: int32
                    type: integer
                  type:
                    description: |-
                      Type indicates the type of FailurePolicyType.
                      Default is FailurePolicyTypeFailFast.
                    type: string
                type: object
              parallelism:
                anyOf:
                - type: integer
                - type: string
                description: |-
                  Parallelism specifies the maximum desired number of pods the job should
                  run at any given time. The actual number of pods running in steady state will
                  be less than this number when the work left to do is less than max parallelism.
                  Not setting this value means no limit.
                x-kubernetes-int-or-string: true
              paused:
                description: Paused will pause the job.
                type: boolean
              podFailurePolicy:
                description: |-
                  PodFailurePolicy specifies how failed pods influence the backoffLimit.
                  Rules are evaluated in order, and once a rule matches a Pod failure,
                  the remaining rules are ignored. When no rule matches, the default
                  handling applies based on FailurePolicy.
                  This is similar to upstream Kubernetes Job's PodFailurePolicy (GA in k8s 1.31).
                properties:
                  rules:
                    description: |-
                      A list of pod failure policy rules. The rules are evaluated in order.
                      Once a rule matches a Pod failure, the remaining of the rules are ignored.
                      When no rule matches the Pod failure, the default handling applies - the
                      counter of pod failures is incremented and it is checked against
                      the backoffLimit. At most 20 elements are allowed.
                    items:
                      description: PodFailurePolicyRule describes how a pod failure
                        is handled when the requirements are met.
                      properties:
                        action:
                          allOf:
                          - enum:
                            - FailJob
                            - Ignore
                            - Count
                          - enum:
                            - FailJob
                            - Ignore
                            - Count
                          description: |-
                            Specifies the action taken on a pod failure when the requirements are satisfied.
                            Possible values are:

                            - FailJob: indicates that the pod's job is marked as Failed and all
                              running pods are terminated.
                            - Ignore: indicates that the counter towards the .backoffLimit is not
                              incremented and a replacement pod is created.
                            - Count: indicates that the pod is handled in the default way - the
                              counter towards the .backoffLimit is incremented.
                          type: string
                        onExitCodes:
                          description: Represents the requirement on the container
                            exit codes.
                          properties:
                            containerName:
                              description: |-
                                Restricts the check for exit codes to the container with the
                                specified name. When null, the rule applies to all containers.
                                When specified, it should match one the container or initContainer
                                names in the pod template.
                              type: string
                            operator:
                              allOf:
                              - enum:
                                - In
                                - NotIn
                              - enum:
                                - In
                                - NotIn
                              description: |-
                                Represents the relationship between the container exit code(s) and the
                                specified values. Containers completed with success (exit code 0) are
                                excluded from the requirement check.
                              type: string
                            values:
                              description: |-
                                Specifies the set of values. Each returned container exit code (might be
                                multiple in case of multiple containers) is checked against this set of
                                values with respect to the operator. The list of values must be ordered
                                and must not contain duplicates. Value '0' cannot be used for the In operator.
                                At least one element is required. At most 255 elements are allowed.
                              items:
                                format: int32
                                type: integer
                              type: array
                              x-kubernetes-list-type: set
                          required:
                          - operator
                          - values
                          type: object
                        onPodConditions:
                          description: |-
                            Represents the requirement on the pod conditions. The requirement is represented
                            as a list of pod condition patterns. The requirement is satisfied if at
                            least one pattern matches an actual pod condition. At most 20 elements are allowed.
                          items:
                            description: |-
                              PodFailurePolicyOnPodConditionsPattern describes a pattern for matching
                              an actual pod condition type.
                            properties:
                              status:
                                default: "True"
                                description: |-
                                  Specifies the required Pod condition status. To match a pod condition
                                  it is required that the specified status equals the pod condition status.
                                  Defaults to True.
                                type: string
                              type:
                                description: |-
                                  Specifies the required Pod condition type. To match a pod condition
                                  it is required that specified type equals the pod condition type.
                                type: string
                            required:
                            - status
                            - type
                            type: object
                          type: array
                          x-kubernetes-list-type: atomic
                      required:
                      - action
                      type: object
                    type: array
                    x-kubernetes-list-type: atomic
                required:
                - rules
                type: object
              podReplacementPolicy:
                description: |-
                  PodReplacementPolicy specifies when to create replacement Pods.
                  Possible values are:
                  - TerminatingOrFailed means that we recreate pods
                    when they are terminating (has a metadata.deletionTimestamp) or failed.
                  - Failed means to wait until a previously created Pod is fully terminated (has phase
                    Failed or Succeeded) before creating a replacement Pod.

                  When using podFailurePolicy, Failed is the the default.
                  When not using podFailurePolicy, TerminatingOrFailed is the default.
                  This is similar to upstream Kubernetes Job's PodReplacementPolicy (GA in k8s 1.34).
                enum:
                - TerminatingOrFailed
                - Failed
                type: string
              template:
                description: Template describes the pod that will be created when
                  executing a job.
                x-kubernetes-preserve-unknown-fields: true
            required:
            - template
            type: object
          status:
            description: BroadcastJobStatus defines the observed state of BroadcastJob
            properties:
              active:
                description: The number of actively running pods.
                format: int32
                type: integer
              completionTime:
                description: |-
                  Represents time when the job was completed. It is not guaranteed to
                  be set in happens-before order across separate operations.
                  It is represented in RFC3339 form and is in UTC.
                format: date-time
                type: string
              conditions:
                description: The latest available observations of an object's current
                  state.
                items:
                  description: JobCondition describes current state of a job.
                  properties:
                    lastProbeTime:
                      description: Last time the condition was checked.
                      format: date-time
                      type: string
                    lastTransitionTime:
                      description: Last time the condition transit from one status
                        to another.
                      format: date-time
                      type: string
                    message:
                      description: Human readable message indicating details about
                        last transition.
                      type: string
                    reason:
                      description: (brief) reason for the condition's last transition.
                      type: string
                    status:
                      description: Status of the condition, one of True, False, Unknown.
                      type: string
                    type:
                      description: Type of job condition, Complete or Failed.
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              desired:
                description: The desired number of pods, this is typically equal to
                  the number of nodes satisfied to run pods.
                format: int32
                type: integer
              failed:
                description: The number of pods which reached phase Failed.
                format: int32
                type: integer
              phase:
                description: The phase of the job.
                type: string
              startTime:
                description: |-
                  Represents time when the job was acknowledged by the job controller.
                  It is not guaranteed to be set in happens-before order across separate operations.
                  It is represented in RFC3339 form and is in UTC.
                format: date-time
                type: string
              succeeded:
                description: The number of pods which reached phase Succeeded.
                format: int32
                type: integer
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
